/*!
 * FullCalendar v1.6.1
 * Docs & License: http://arshaw.com/fullcalendar/
 * (c) 2013 Adam Shaw
 */
(function(t,e){function n(e){t.extend(!0,Me,e)}function r(n,r,l,u){function d(t,e){ae?(x(),C(),N(),M(t,e)):v()}function v(){oe=r.theme?"ui":"fc",n.addClass("fc"),r.isRTL?n.addClass("fc-rtl"):n.addClass("fc-ltr"),r.theme&&n.addClass("ui-widget"),ae=t("<div class='fc-content' style='position:relative'/>").prependTo(n),te=new De(K,r,u),ee=te.render(),ee&&n.prepend(ee),ne=new a(K,r),re=ne.render(),re&&n.prepend(re),b(r.defaultView),t(window).resize(T),y()||h()}function h(){setTimeout(function(){!ie.start&&y()&&M()},0)}function g(){t(window).unbind("resize",T),ne.destroy(),ae.remove(),n.removeClass("fc fc-rtl ui-widget")}function m(){return 0!==he.offsetWidth}function y(){return 0!==t("body")[0].offsetWidth}function b(e){if(!ie||e!=ie.name){me++,I();var n,r=ie;r?((r.beforeHide||q)(),B(ae,ae.height()),r.element.hide()):B(ae,1),ae.css("overflow","hidden"),ie=ge[e],ie?ie.element.show():ie=ge[e]=new xe[e](n=le=t("<div class='fc-view fc-view-"+e+"' style='position:absolute'/>").appendTo(ae),K),r&&ne.deactivateButton(r.name),ne.activateButton(e),M(),ae.css("overflow",""),r&&B(ae,1),n||(ie.afterShow||q)(),me--}}function M(t,r){if(m()){me++,I(),ce===e&&x();var a=!1;!ie.start||t||ie.start>ye||ye>=ie.end||r?(ie.render(ye,t||0,r),E(!0),a=!0):ie.sizeDirty?(ie.clearEvents(),E(),a=!0):ie.eventsDirty&&(ie.clearEvents(),a=!0),ie.sizeDirty=!1,ie.eventsDirty=!1,R(a),se=n.outerWidth(),ne.updateTitle(ie.title);var o=new Date;o>=ie.start&&ie.end>o?ne.disableButton("today"):ne.enableButton("today"),me--,ie.trigger("viewDisplay",he)}}function S(){C(),m()&&(x(),E(),I(),ie.clearEvents(),ie.renderEvents(be),ie.sizeDirty=!1)}function C(){t.each(ge,function(t,e){e.sizeDirty=!0})}function x(){ce=r.contentHeight?r.contentHeight:r.height?r.height-(re?re.height():0)-A(ae):Math.round(ae.width()/Math.max(r.aspectRatio,.5))}function E(t){me++,ie.setHeight(ce,t),le&&(le.css("position","relative"),le=null),ie.setWidth(ae.width(),t),me--}function T(){if(!me)if(ie.start){var t=++pe;setTimeout(function(){t==pe&&!me&&m()&&se!=(se=n.outerWidth())&&(me++,S(),ie.trigger("windowResize",he),me--)},200)}else h()}function R(t){!r.lazyFetching||de(ie.visStart,ie.visEnd)?k():t&&F()}function k(){fe(ie.visStart,ie.visEnd)}function H(t){be=t,F()}function z(t){F(t)}function F(t){N(),m()&&(ie.clearEvents(),ie.renderEvents(be,t),ie.eventsDirty=!1,ie.renderAnnotations(we))}function N(){t.each(ge,function(t,e){e.eventsDirty=!0})}function W(t){u.push(t);for(var e=0;be.length>e;e++)ve(be[e]);d(!1,!0)}function L(t){for(var e=[],n=0;u.length>n;n++)u[n].id!=t&&e.push(u[n]);u=e,d(!1,!0)}function O(e){return t.isFunction(e)?t.grep(u,e):e?(e+="",t.grep(u,function(t){return t.id==e})):u}function _(t,n,r){ie.select(t,n,r===e?!0:r)}function I(){ie&&ie.unselect()}function Y(){M(-1)}function j(){M(1)}function P(){i(ye,-1),M()}function V(){i(ye,1),M()}function J(){ye=new Date,M()}function X(t,e,n){t instanceof Date?ye=f(t):p(ye,t,e,n),M()}function U(t,n,r){t!==e&&i(ye,t),n!==e&&s(ye,n),r!==e&&c(ye,r),M()}function Z(){return f(ye)}function $(){return ie}function Q(t,n){return n===e?r[t]:(("height"==t||"contentHeight"==t||"aspectRatio"==t)&&(r[t]=n,S()),e)}function G(t,n){return r[t]?r[t].apply(n||he,Array.prototype.slice.call(arguments,2)):e}var K=this;K.options=r,K.render=d,K.destroy=g,K.refetchEvents=k,K.reportEvents=H,K.reportEventChange=z,K.rerenderEvents=F,K.changeView=b,K.select=_,K.unselect=I,K.prev=Y,K.next=j,K.prevYear=P,K.nextYear=V,K.today=J,K.gotoDate=X,K.incrementDate=U,K.formatDate=function(t,e){return D(t,e,r)},K.formatDates=function(t,e,n){return w(t,e,n,r)},K.getDate=Z,K.getView=$,K.option=Q,K.trigger=G,K.getResources=function(){return u},K.setResources=function(t){u=t,d(!1,!0)},K.addEventResource=W,K.removeEventResource=L,K.clientResources=O,o.call(K,r,l,u);var te,ee,ne,re,ae,oe,ie,se,ce,le,ue,de=K.isFetchNeeded,fe=K.fetchEvents,ve=K.associateResourceWithEvent,he=n[0],ge={},pe=0,me=0,ye=new Date,be=[],we=K.options.annotations;p(ye,r.year,r.month,r.date),r.droppable&&t(document).bind("dragstart",function(e,n){var a=e.target,o=t(a);if(!o.parents(".fc").length){var i=r.dropAccept;(t.isFunction(i)?i.call(a,o):o.is(i))&&(ue=a,ie.dragStart(ue,e,n))}}).bind("dragstop",function(t,e){ue&&(ie.dragStop(ue,t,e),ue=null)})}function a(n,r){function a(){v=r.theme?"ui":"fc";var n=r.header;return n?h=t("<table class='fc-header' style='width:100%'/>").append(t("<tr/>").append(i("left")).append(i("center")).append(i("right"))):e}function o(){h.remove()}function i(e){var a=t("<td class='fc-header-"+e+"'/>"),o=r.header[e];return o&&t.each(o.split(" "),function(e){e>0&&a.append("<span class='fc-header-space'/>");var o;t.each(this.split(","),function(e,i){if("title"==i)a.append("<span class='fc-header-title'><h2>&nbsp;</h2></span>"),o&&o.addClass(v+"-corner-right"),o=null;else{var s;if(n[i]?s=n[i]:xe[i]&&(s=function(){u.removeClass(v+"-state-hover"),n.changeView(i)}),s){var c=r.theme?V(r.buttonIcons,i):null,l=V(r.buttonText,i),u=t("<span class='fc-button fc-button-"+i+" "+v+"-state-default'>"+(c?"<span class='fc-icon-wrap'><span class='ui-icon ui-icon-"+c+"'/>"+"</span>":l)+"</span>").click(function(){u.hasClass(v+"-state-disabled")||s()}).mousedown(function(){u.not("."+v+"-state-active").not("."+v+"-state-disabled").addClass(v+"-state-down")}).mouseup(function(){u.removeClass(v+"-state-down")}).hover(function(){u.not("."+v+"-state-active").not("."+v+"-state-disabled").addClass(v+"-state-hover")},function(){u.removeClass(v+"-state-hover").removeClass(v+"-state-down")}).appendTo(a);U(u),o||u.addClass(v+"-corner-left"),o=u}}}),o&&o.addClass(v+"-corner-right")}),a}function s(t){h.find("h2").html(t)}function c(t){h.find("span.fc-button-"+t).addClass(v+"-state-active")}function l(t){h.find("span.fc-button-"+t).removeClass(v+"-state-active")}function u(t){h.find("span.fc-button-"+t).addClass(v+"-state-disabled")}function d(t){h.find("span.fc-button-"+t).removeClass(v+"-state-disabled")}var f=this;f.render=a,f.destroy=o,f.updateTitle=s,f.activateButton=c,f.deactivateButton=l,f.disableButton=u,f.enableButton=d;var v,h=t([])}function o(n,r,a){function o(t,e){return!E||E>t||e>T}function i(t,e){E=t,T=e,A=[];var n=++N,r=F.length;W=r;for(var a=0;r>a;a++)s(F[a],n)}function s(e,r){c(e,function(a){if(r==N){if(a){n.eventDataTransform&&(a=t.map(a,n.eventDataTransform)),e.eventDataTransform&&(a=t.map(a,e.eventDataTransform));for(var o=0;a.length>o;o++)a[o].source=e,D(a[o]);A=A.concat(a)}W--,W||H(A)}})}function c(r,a){var o,i,s=Ce.sourceFetchers;for(o=0;s.length>o;o++){if(i=s[o](r,E,T,a),i===!0)return;if("object"==typeof i)return c(i,a),e}var l=r.events;if(l)t.isFunction(l)?(y(),l(f(E),f(T),function(t){a(t),b()})):t.isArray(l)?a(l):a();else{var u=r.url;if(u){var d=r.success,v=r.error,h=r.complete,g=t.extend({},r.data||{}),p=K(r.startParam,n.startParam),m=K(r.endParam,n.endParam);p&&(g[p]=Math.round(+E/1e3)),m&&(g[m]=Math.round(+T/1e3)),y(),t.ajax(t.extend({},Ee,r,{data:g,success:function(e){e=e||[];var n=G(d,this,arguments);t.isArray(n)&&(e=n),a(e)},error:function(){G(v,this,arguments),a()},complete:function(){G(h,this,arguments),b()}}))}else a()}}function l(t){t=u(t),t&&(W++,s(t,N))}function u(n){return t.isFunction(n)||t.isArray(n)?n={events:n}:"string"==typeof n&&(n={url:n}),"object"==typeof n?(w(n),F.push(n),n):e}function d(e){F=t.grep(F,function(t){return!M(t,e)}),A=t.grep(A,function(t){return!M(t.source,e)}),H(A)}function v(t){var e,n,r=A.length,a=k().defaultEventEnd,o=t.start-t._start,i=t.end?t.end-(t._end||a(t)):0;for(e=0;r>e;e++)n=A[e],n._id==t._id&&n!=t&&(n.start=new Date(+n.start+o),n.end=t.end?n.end?new Date(+n.end+i):new Date(+a(n)+i):null,n.title=t.title,n.url=t.url,n.allDay=t.allDay,n.className=t.className,n.editable=t.editable,n.color=t.color,n.backgroudColor=t.backgroudColor,n.borderColor=t.borderColor,n.textColor=t.textColor,D(n));D(t),H(A)}function h(t,e){D(t),t.source||(e&&(z.events.push(t),t.source=z),A.push(t)),H(A)}function g(e){if(e){if(!t.isFunction(e)){var n=e+"";e=function(t){return t._id==n}}A=t.grep(A,e,!0);for(var r=0;F.length>r;r++)t.isArray(F[r].events)&&(F[r].events=t.grep(F[r].events,e,!0))}else{A=[];for(var r=0;F.length>r;r++)t.isArray(F[r].events)&&(F[r].events=[])}H(A)}function p(e){return t.isFunction(e)?t.grep(A,e):e?(e+="",t.grep(A,function(t){return t._id==e})):A}function y(){L++||R("loading",null,!0)}function b(){--L||R("loading",null,!1)}function D(t){var r=t.source||{},a=K(r.ignoreTimezone,n.ignoreTimezone);t._id=t._id||(t.id===e?"_fc"+Te++:t.id+""),t.date&&(t.start||(t.start=t.date),delete t.date),t._start=f(t.start=m(t.start,a)),t.end=m(t.end,a),t.end&&t.end<=t.start&&(t.end=null),t._end=t.end?f(t.end):null,t.allDay===e&&(t.allDay=K(r.allDayDefault,n.allDayDefault)),t.className?"string"==typeof t.className&&(t.className=t.className.split(/\s+/)):t.className=[],C(t)}function w(t){t.className?"string"==typeof t.className&&(t.className=t.className.split(/\s+/)):t.className=[];for(var e=Ce.sourceNormalizers,n=0;e.length>n;n++)e[n](t)}function M(t,e){return t&&e&&S(t)==S(e)}function S(t){return("object"==typeof t?t.events||t.url:"")||t}function C(e){var n=0;e.resourceId&&t.each(O,function(t,r){r.id==e.resourceId&&(e.resource=r,e.resource._col=n,delete e.resourceId),n++})}var x=this;x.isFetchNeeded=o,x.fetchEvents=i,x.addEventSource=l,x.removeEventSource=d,x.updateEvent=v,x.renderEvent=h,x.removeEvents=g,x.clientEvents=p,x.normalizeEvent=D,x.associateResourceWithEvent=C;for(var E,T,R=x.trigger,k=x.getView,H=x.reportEvents,z={events:[]},F=[z],N=0,W=0,L=0,A=[],O=a,_=0;r.length>_;_++)u(r[_])}function i(t,e,n){return t.setFullYear(t.getFullYear()+e),n||d(t),t}function s(t,e,n){if(+t){var r=t.getMonth()+e,a=f(t);for(a.setDate(1),a.setMonth(r),t.setMonth(r),n||d(t);t.getMonth()!=a.getMonth();)t.setDate(t.getDate()+(a>t?1:-1))}return t}function c(t,e,n){if(+t){var r=t.getDate()+e,a=f(t);a.setHours(9),a.setDate(r),t.setDate(r),n||d(t),l(t,a)}return t}function l(t,e){if(+t)for(;t.getDate()!=e.getDate();)t.setTime(+t+(e>t?1:-1)*He)}function u(t,e){return t.setMinutes(t.getMinutes()+e),t}function d(t){return t.setHours(0),t.setMinutes(0),t.setSeconds(0),t.setMilliseconds(0),t}function f(t,e){return e?d(new Date(+t)):new Date(+t)}function v(){var t,e=0;do t=new Date(1970,e++,1);while(t.getHours());return t}function h(t,e,n){for(e=e||1;!t.getDay()||n&&1==t.getDay()||!n&&6==t.getDay();)c(t,e);return t}function g(t,e){return Math.round((f(t,!0)-f(e,!0))/ke)}function p(t,n,r,a){n!==e&&n!=t.getFullYear()&&(t.setDate(1),t.setMonth(0),t.setFullYear(n)),r!==e&&r!=t.getMonth()&&(t.setDate(1),t.setMonth(r)),a!==e&&t.setDate(a)}function m(t,n){return"object"==typeof t?t:"number"==typeof t?new Date(1e3*t):"string"==typeof t?t.match(/^\d+(\.\d+)?$/)?new Date(1e3*parseFloat(t)):(n===e&&(n=!0),y(t,n)||(t?new Date(t):null)):null}function y(t,e){var n=t.match(/^([0-9]{4})(-([0-9]{2})(-([0-9]{2})([T ]([0-9]{2}):([0-9]{2})(:([0-9]{2})(\.([0-9]+))?)?(Z|(([-+])([0-9]{2})(:?([0-9]{2}))?))?)?)?)?$/);if(!n)return null;var r=new Date(n[1],0,1);if(e||!n[13]){var a=new Date(n[1],0,1,9,0);n[3]&&(r.setMonth(n[3]-1),a.setMonth(n[3]-1)),n[5]&&(r.setDate(n[5]),a.setDate(n[5])),l(r,a),n[7]&&r.setHours(n[7]),n[8]&&r.setMinutes(n[8]),n[10]&&r.setSeconds(n[10]),n[12]&&r.setMilliseconds(1e3*Number("0."+n[12])),l(r,a)}else if(r.setUTCFullYear(n[1],n[3]?n[3]-1:0,n[5]||1),r.setUTCHours(n[7]||0,n[8]||0,n[10]||0,n[12]?1e3*Number("0."+n[12]):0),n[14]){var o=60*Number(n[16])+(n[18]?Number(n[18]):0);o*="-"==n[15]?1:-1,r=new Date(+r+1e3*60*o)}return r}function b(t){if("number"==typeof t)return 60*t;if("object"==typeof t)return 60*t.getHours()+t.getMinutes();var e=t.match(/(\d+)(?::(\d+))?\s*(\w+)?/);if(e){var n=parseInt(e[1],10);return e[3]&&(n%=12,"p"==e[3].toLowerCase().charAt(0)&&(n+=12)),60*n+(e[2]?parseInt(e[2],10):0)}}function D(t,e,n){return w(t,null,e,n)}function w(t,e,n,r){r=r||Me;var a,o,i,s,c=t,l=e,u=n.length,d="";for(a=0;u>a;a++)if(o=n.charAt(a),"'"==o){for(i=a+1;u>i;i++)if("'"==n.charAt(i)){c&&(d+=i==a+1?"'":n.substring(a+1,i),a=i);break}}else if("("==o){for(i=a+1;u>i;i++)if(")"==n.charAt(i)){var f=D(c,n.substring(a+1,i),r);parseInt(f.replace(/\D/,""),10)&&(d+=f),a=i;break}}else if("["==o){for(i=a+1;u>i;i++)if("]"==n.charAt(i)){var v=n.substring(a+1,i),f=D(c,v,r);f!=D(l,v,r)&&(d+=f),a=i;break}}else if("{"==o)c=e,l=t;else if("}"==o)c=t,l=e;else{for(i=u;i>a;i--)if(s=Fe[n.substring(a,i)]){c&&(d+=s(c,r)),a=i-1;break}i==a&&c&&(d+=o)}return d}function M(t){var e,n=new Date(t.getTime());return n.setDate(n.getDate()+4-(n.getDay()||7)),e=n.getTime(),n.setMonth(0),n.setDate(1),Math.floor(Math.round((e-n)/864e5)/7)+1}function S(t){return t.end?C(t.end,t.allDay):c(f(t.start),1)}function C(t,e){return t=f(t),e||t.getHours()||t.getMinutes()?c(t,1):d(t)}function x(t,e){return 100*(e.msLength-t.msLength)+(t.event.start-e.event.start)}function E(t,e){return t.end>e.start&&t.start<e.end}function T(t,e,n,r){var a,o,i,s,c,l,u,d,v=[],h=t.length;for(a=0;h>a;a++)o=t[a],i=o.start,s=e[a],s>n&&r>i&&(n>i?(c=f(n),u=!1):(c=i,u=!0),s>r?(l=f(r),d=!1):(l=s,d=!0),v.push({event:o,start:c,end:l,isStart:u,isEnd:d,msLength:l-c}));return v.sort(x)}function R(t){var e,n,r,a,o,i=[],s=t.length;for(e=0;s>e;e++){for(n=t[e],r=0;;){if(a=!1,i[r])for(o=0;i[r].length>o;o++)if(E(i[r][o],n)){a=!0;break}if(!a)break;r++}i[r]?i[r].push(n):i[r]=[n]}return i}function k(n,r,a){n.unbind("mouseover").mouseover(function(n){for(var o,i,s,c=n.target;c!=this;)o=c,c=c.parentNode;(i=o._fci)!==e&&(o._fci=e,s=r[i],a(s.event,s.element,s),t(n.target).trigger(n)),n.stopPropagation()})}function H(e,n,r){for(var a,o=0;e.length>o;o++)a=t(e[o]),a.width(Math.max(0,n-F(a,r)))}function z(e,n,r){for(var a,o=0;e.length>o;o++)a=t(e[o]),a.height(Math.max(0,n-A(a,r)))}function F(t,e){return N(t)+L(t)+(e?W(t):0)}function N(e){return(parseFloat(t.css(e[0],"paddingLeft",!0))||0)+(parseFloat(t.css(e[0],"paddingRight",!0))||0)}function W(e){return(parseFloat(t.css(e[0],"marginLeft",!0))||0)+(parseFloat(t.css(e[0],"marginRight",!0))||0)}function L(e){return(parseFloat(t.css(e[0],"borderLeftWidth",!0))||0)+(parseFloat(t.css(e[0],"borderRightWidth",!0))||0)}function A(t,e){return O(t)+I(t)+(e?_(t):0)}function O(e){return(parseFloat(t.css(e[0],"paddingTop",!0))||0)+(parseFloat(t.css(e[0],"paddingBottom",!0))||0)}function _(e){return(parseFloat(t.css(e[0],"marginTop",!0))||0)+(parseFloat(t.css(e[0],"marginBottom",!0))||0)}function I(e){return(parseFloat(t.css(e[0],"borderTopWidth",!0))||0)+(parseFloat(t.css(e[0],"borderBottomWidth",!0))||0)}function B(t,e){e="number"==typeof e?e+"px":e,t.each(function(t,n){n.style.cssText+=";min-height:"+e+";_height:"+e})}function q(){}function Y(t,e){return t-e}function j(t){return Math.max.apply(Math,t)}function P(t){return(10>t?"0":"")+t}function V(t,n){if(t[n]!==e)return t[n];for(var r,a=n.split(/(?=[A-Z])/),o=a.length-1;o>=0;o--)if(r=t[a[o].toLowerCase()],r!==e)return r;return t[""]}function J(t){return t.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/'/g,"&#039;").replace(/"/g,"&quot;").replace(/\n/g,"<br />")}function X(t){return t.id+"/"+t.className+"/"+t.style.cssText.replace(/(^|;)\s*(top|left|width|height)\s*:[^;]*/gi,"")}function U(t){t.attr("unselectable","on").css("MozUserSelect","none").bind("selectstart.ui",function(){return!1})}function Z(t){t.children().removeClass("fc-first fc-last").filter(":first-child").addClass("fc-first").end().filter(":last-child").addClass("fc-last")}function $(t,e){t.each(function(t,n){n.className=n.className.replace(/^fc-\w*/,"fc-"+Re[e.getDay()])})}function Q(t,e){var n=t.source||{},r=t.color,a=n.color,o=e("eventColor"),i=t.backgroundColor||r||n.backgroundColor||a||e("eventBackgroundColor")||o,s=t.borderColor||r||n.borderColor||a||e("eventBorderColor")||o,c=t.textColor||n.textColor||e("eventTextColor"),l=[];return i&&l.push("background-color:"+i),s&&l.push("border-color:"+s),c&&l.push("color:"+c),l.join(";")}function G(e,n,r){if(t.isFunction(e)&&(e=[e]),e){var a,o;for(a=0;e.length>a;a++)o=e[a].apply(n,r)||o;return o}}function K(){for(var t=0;arguments.length>t;t++)if(arguments[t]!==e)return arguments[t]}function te(t,e){function n(t,e){e&&(s(t,e),t.setDate(1));var n=f(t,!0);n.setDate(1);var l=s(f(n),1),u=f(n),d=f(l),v=a("firstDay"),g=a("weekends")?0:1;g&&(h(u),h(d,-1,!0)),c(u,-((u.getDay()-Math.max(v,g)+7)%7)),c(d,(7-d.getDay()+Math.max(v,g))%7);var p=Math.round((d-u)/(7*ke));"fixed"==a("weekMode")&&(c(d,7*(6-p)),p=6),r.title=i(n,a("titleFormat")),r.start=n,r.end=l,r.visStart=u,r.visEnd=d,o(p,g?5:7,!0)}var r=this;r.render=n,re.call(r,t,e,"month");var a=r.opt,o=r.renderBasic,i=e.formatDate}function ee(t,e){function n(t,e){e&&c(t,7*e);var n=c(f(t),-((t.getDay()-a("firstDay")+7)%7)),s=c(f(n),7),l=f(n),u=f(s),d=a("weekends");d||(h(l),h(u,-1,!0)),r.title=i(l,c(f(u),-1),a("titleFormat")),r.start=n,r.end=s,r.visStart=l,r.visEnd=u,o(1,d?7:5,!1)}var r=this;r.render=n,re.call(r,t,e,"basicWeek");var a=r.opt,o=r.renderBasic,i=e.formatDates}function ne(t,e){function n(t,e){e&&(c(t,e),a("weekends")||h(t,0>e?-1:1)),r.title=i(t,a("titleFormat")),r.start=r.visStart=f(t,!0),r.end=r.visEnd=c(f(r.start),1),o(1,1,!1)}var r=this;r.render=n,re.call(r,t,e,"basicDay");var a=r.opt,o=r.renderBasic,i=e.formatDate}function re(e,n,r){function a(t,e,n){ne=t,re=e,o();var r=!P;r?i():Ee(),s(n)}function o(){ce=Ce("isRTL"),ce?(le=-1,de=re-1):(le=1,de=0),pe=Ce("firstDay"),ye=Ce("weekends")?0:1,be=Ce("theme")?"ui":"fc",De=Ce("columnFormat"),we=Ce("weekNumbers"),Me=Ce("weekNumberTitle"),Se="iso"!=Ce("weekNumberCalculation")?"w":"W"}function i(){Q=t("<div style='position:absolute;z-index:8;top:0;left:0'/>").appendTo(e)}function s(n){var r,a,o,i,s="",c=be+"-widget-header",l=be+"-widget-content",u=I.start.getMonth(),f=d(new Date);for(s+="<table class='fc-border-separate' style='width:100%' cellspacing='0'><thead><tr>",we&&(s+="<th class='fc-week-number "+c+"'/>"),r=0;re>r;r++)o=z(0,r),s+="<th class='fc-day-header fc-"+Re[o.getDay()]+" "+c+"'/>";for(s+="</tr></thead><tbody>",r=0;ne>r;r++){for(s+="<tr class='fc-week'>",we&&(s+="<td class='fc-week-number "+l+"'>"+"<div/>"+"</td>"),a=0;re>a;a++)o=z(r,a),i=["fc-day","fc-"+Re[o.getDay()],l],o.getMonth()!=u&&i.push("fc-other-month"),+o==+f&&(i.push("fc-today"),i.push(be+"-state-highlight")),s+="<td class='"+i.join(" ")+"'"+" data-date='"+ze(o,"yyyy-MM-dd")+"'"+">"+"<div>",n&&(s+="<div class='fc-day-number'>"+o.getDate()+"</div>"),s+="<div class='fc-day-content'><div style='position:relative'>&nbsp;</div></div></div></td>";s+="</tr>"}s+="</tbody></table>",O(),q&&q.remove(),q=t(s).appendTo(e),Y=q.find("thead"),j=Y.find(".fc-day-header"),P=q.find("tbody"),V=P.find("tr"),J=P.find(".fc-day"),X=V.find("td:first-child"),$=V.eq(0).find(".fc-day-content > div"),Z(Y.add(Y.find("tr"))),Z(V),V.eq(0).addClass("fc-first"),V.filter(":last").addClass("fc-last"),we&&Y.find(".fc-week-number").text(Me),j.each(function(e,n){var r=F(e);t(n).text(ze(r,De))}),we&&P.find(".fc-week-number > div").each(function(e,n){var r=z(e,0);t(n).text(ze(r,Se))}),J.each(function(e,n){var r=F(e);xe("dayRender",I,r,t(n))}),v(J)}function l(e){K=e;var n,r,a,o=K-Y.height();"variable"==Ce("weekMode")?n=r=Math.floor(o/(1==ne?2:6)):(n=Math.floor(o/ne),r=o-n*(ne-1)),X.each(function(e,o){ne>e&&(a=t(o),B(a.find("> div"),(e==ne-1?r:n)-A(a)))}),_()}function u(t){G=t,se.clear(),ee=0,we&&(ee=Y.find("th.fc-week-number").outerWidth()),te=Math.floor((G-ee)/re),H(j.slice(0,-1),te)}function v(t){t.click(h).mousedown(He)}function h(e){if(!Ce("selectable")){var n=y(t(this).data("date"));xe("dayClick",this,n,!0,e)}}function p(t,e,n){n&&oe.build();for(var r=f(I.visStart),a=c(f(r),re),o=0;ne>o;o++){var i=new Date(Math.max(r,t)),s=new Date(Math.min(a,e));if(s>i){var l,u;ce?(l=g(s,r)*le+de+1,u=g(i,r)*le+de+1):(l=g(i,r),u=g(s,r)),v(m(o,l,o,u-1))}c(r,7),c(a,7)}}function m(t,n,r,a){var o=oe.rect(t,n,r,a,e);return Te(o,e)}function b(t){return f(t)}function D(t,e){p(t,c(f(e),1),!0)}function w(){ke()}function M(t,e,n){var r=R(t),a=J[r.row*re+r.col];xe("dayClick",a,t,e,n)}function S(t,e){ie.start(function(t){ke(),t&&m(t.row,t.col,t.row,t.col)},e)}function C(t,e,n){var r=ie.stop();if(ke(),r){var a=k(r);xe("drop",t,a,!0,e,n,!1)}}function x(t){return f(t.start)}function E(t){return se.left(t)}function T(t){return se.right(t)}function R(t){return{row:Math.floor(g(t,I.visStart)/7),col:N(t.getDay())}}function k(t){return z(t.row,t.col)}function z(t,e){return c(f(I.visStart),7*t+e*le+de)}function F(t){return z(Math.floor(t/re),t%re)}function N(t){return(t-Math.max(pe,ye)+re)%re*le+de}function W(t){return V.eq(t)}function L(){var t=0;return we&&(t+=ee),{left:t,right:G}}function O(){B(e,e.height())}function _(){B(e,1)}var I=this;I.renderBasic=a,I.setHeight=l,I.setWidth=u,I.renderDayOverlay=p,I.defaultSelectionEnd=b,I.renderSelection=D,I.clearSelection=w,I.reportDayClick=M,I.dragStart=S,I.dragStop=C,I.defaultEventEnd=x,I.getHoverListener=function(){return ie},I.colContentLeft=E,I.colContentRight=T,I.dayOfWeekCol=N,I.dateCell=R,I.cellDate=k,I.cellIsAllDay=function(){return!0},I.allDayRow=W,I.allDayBounds=L,I.getRowCnt=function(){return ne},I.getColCnt=function(){return re},I.getColWidth=function(){return te},I.getDaySegmentContainer=function(){return Q},ue.call(I,e,n,r),ve.call(I),fe.call(I),ae.call(I);var q,Y,j,P,V,J,X,$,Q,G,K,te,ee,ne,re,oe,ie,se,ce,le,de,pe,ye,be,De,we,Me,Se,Ce=I.opt,xe=I.trigger,Ee=I.clearEvents,Te=I.renderOverlay,ke=I.clearOverlays,He=I.daySelectionMousedown,ze=n.formatDate;U(e.addClass("fc-grid")),oe=new he(function(e,n){var r,a,o;j.each(function(e,i){r=t(i),a=r.offset().left,e&&(o[1]=a),o=[a],n[e]=o}),o[1]=a+r.outerWidth(),V.each(function(n,i){ne>n&&(r=t(i),a=r.offset().top,n&&(o[1]=a),o=[a],e[n]=o)}),o[1]=a+r.outerHeight()}),ie=new ge(oe),se=new me(function(t){return $.eq(t)})}function ae(){function e(t,e){v(t),E(r(t),e),l("eventAfterAllRender")}function n(){h(),b().empty()}function r(e){var n,r,a,o,s,l,u=C(),d=x(),v=f(i.visStart),h=c(f(v),d),g=t.map(e,S),p=[];for(n=0;u>n;n++){for(r=R(T(e,g,v,h)),a=0;r.length>a;a++)for(o=r[a],s=0;o.length>s;s++)l=o[s],l.row=n,l.level=a,p.push(l);c(v,7),c(h,7)}return p}function a(t,e,n){u(t)&&o(t,e),n.isEnd&&d(t)&&k(t,e,n),g(t,e)}function o(t,e){var n,r=D();e.draggable({zIndex:9,delay:50,opacity:s("dragOpacity"),revertDuration:s("dragRevertDuration"),start:function(a,o){l("eventDragStart",e,t,a,o),m(t,e),r.start(function(r,a,o,i){e.draggable("option","revert",!r||!o&&!i),M(),r?(n=7*o+i*(s("isRTL")?-1:1),w(c(f(t.start),n),c(S(t),n))):n=0},a,"drag")},stop:function(a,o){r.stop(),M(),l("eventDragStop",e,t,a,o),n?y(this,t,n,0,t.allDay,a,o):(e.css("filter",""),p(t,e))}})}var i=this;i.renderEvents=e,i.compileDaySegs=r,i.clearEvents=n,i.bindDaySeg=a,de.call(i);var s=i.opt,l=i.trigger,u=i.isEventDraggable,d=i.isEventResizable,v=i.reportEvents,h=i.reportEventClear,g=i.eventElementHandlers,p=i.showEvents,m=i.hideEvents,y=i.eventDrop,b=i.getDaySegmentContainer,D=i.getHoverListener,w=i.renderDayOverlay,M=i.clearOverlays,C=i.getRowCnt,x=i.getColCnt,E=i.renderDaySegs,k=i.resizableDayEvent}function oe(t,e){function n(t,e){e&&c(t,7*e);var n=c(f(t),-((t.getDay()-a("firstDay")+7)%7)),s=c(f(n),7),l=f(n),u=f(s),d=a("weekends");d||(h(l),h(u,-1,!0)),r.title=i(l,c(f(u),-1),a("titleFormat")),r.start=n,r.end=s,r.visStart=l,r.visEnd=u,o(d?7:5)}var r=this;r.render=n,se.call(r,t,e,"agendaWeek");var a=r.opt,o=r.renderAgenda,i=e.formatDates}function ie(t,e){function n(t,e){e&&(c(t,e),a("weekends")||h(t,0>e?-1:1));var n=f(t,!0),s=c(f(n),1);r.title=i(t,a("titleFormat")),r.start=r.visStart=n,r.end=r.visEnd=s,o(1)}var r=this;r.render=n,se.call(r,t,e,"agendaDay");var a=r.opt,o=r.renderAgenda,i=e.formatDate}function se(n,r,a){function o(t){Ae=t,i(),te?nn():s(),l()}function i(){Ye=tn("theme")?"ui":"fc",Pe=tn("weekends")?0:1,je=tn("firstDay"),(Ve=tn("isRTL"))?(Je=-1,Xe=Ae-1):(Je=1,Xe=0),Ue=b(tn("minTime")),Ze=b(tn("maxTime")),$e=tn("columnFormat"),Qe=tn("weekNumbers"),Ge=tn("weekNumberTitle"),Ke="iso"!=tn("weekNumberCalculation")?"w":"W",Ne=tn("snapMinutes")||tn("slotMinutes")}function s(){var e,r,a,o,i,s=Ye+"-widget-header",c=Ye+"-widget-content",l=0==tn("slotMinutes")%15;for(e="<table style='width:100%' class='fc-agenda-days fc-border-separate' cellspacing='0'><thead><tr>",e+=Qe?"<th class='fc-agenda-axis fc-week-number "+s+"'/>":"<th class='fc-agenda-axis "+s+"'>&nbsp;</th>",r=0;Ae>r;r++)e+="<th class='fc- fc-col"+r+" "+s+"'/>";for(e+="<th class='fc-agenda-gutter "+s+"'>&nbsp;</th>"+"</tr>"+"</thead>"+"<tbody>"+"<tr>"+"<th class='fc-agenda-axis "+s+"'>&nbsp;</th>",r=0;Ae>r;r++)e+="<td class='fc- fc-col"+r+" "+c+"'>"+"<div>"+"<div class='fc-day-content'>"+"<div style='position:relative'>&nbsp;</div>"+"</div>"+"</div>"+"</td>";for(e+="<td class='fc-agenda-gutter "+c+"'>&nbsp;</td>"+"</tr>"+"</tbody>"+"</table>",te=t(e).appendTo(n),ee=te.find("thead"),ne=ee.find("th").slice(1,-1),re=te.find("tbody"),ae=re.find("td").slice(0,-1),oe=ae.find("div.fc-day-content div"),ie=ae.eq(0),se=ie.find("> div"),Z(ee.add(ee.find("tr"))),Z(re.add(re.find("tr"))),Ce=ee.find("th:first"),xe=te.find(".fc-agenda-gutter"),le=t("<div style='position:absolute;z-index:2;left:0;width:100%'/>").appendTo(n),tn("allDaySlot")?(de=t("<div style='position:absolute;z-index:8;top:0;left:0'/>").appendTo(le),e="<table style='width:100%' class='fc-agenda-allday' cellspacing='0'><tr><th class='"+s+" fc-agenda-axis'>"+tn("allDayText")+"</th>"+"<td>"+"<div class='fc-day-content'><div style='position:relative'/></div>"+"</td>"+"<th class='"+s+" fc-agenda-gutter'>&nbsp;</th>"+"</tr>"+"</table>",pe=t(e).appendTo(le),ye=pe.find("tr"),w(ye.find("td")),Ce=Ce.add(pe.find("th:first")),xe=xe.add(pe.find("th.fc-agenda-gutter")),le.append("<div class='fc-agenda-divider "+s+"'>"+"<div class='fc-agenda-divider-inner'/>"+"</div>")):de=t([]),be=t("<div style='position:absolute;width:100%;overflow-x:hidden;overflow-y:auto'/>").appendTo(le),De=t("<div style='position:relative;width:100%;overflow:hidden'/>").appendTo(be),we=t("<div style='position:absolute;z-index:8;top:0;left:0'/>").appendTo(De),e="<table class='fc-agenda-slots' style='width:100%' cellspacing='0'><tbody>",a=v(),o=u(f(a),Ze),u(a,Ue),Oe=0,r=0;o>a;r++)i=a.getMinutes(),e+="<tr class='fc-slot"+r+" "+(i?"fc-minor":"")+"'>"+"<th class='fc-agenda-axis "+s+"'>"+(l&&i?"&nbsp;":un(a,tn("axisFormat")))+"</th>"+"<td class='"+c+"'>"+"<div style='position:relative'>&nbsp;</div>"+"</td>"+"</tr>",u(a,tn("slotMinutes")),Oe++;e+="</tbody></table>",Me=t(e).appendTo(De),Se=Me.find("div:first"),M(Me.find("td")),Ce=Ce.add(Me.find("th:first"))}function l(){var t,e,n,r,a=d(new Date);if(Qe){var o=un(N(0),Ke);Ve?o+=Ge:o=Ge+o,ee.find(".fc-week-number").text(o)}for(t=0;Ae>t;t++)r=N(t),e=ne.eq(t),e.html(un(r,$e)),n=ae.eq(t),+r==+a?n.addClass(Ye+"-state-highlight fc-today"):n.removeClass(Ye+"-state-highlight fc-today"),$(e.add(n),r)}function h(t,n){t===e&&(t=Re),Re=t,dn={};var r=re.position().top,a=be.position().top,o=Math.min(t-r,Me.height()+a+1);se.height(o-A(ie)),le.css("top",r),be.height(o-a-1),Fe=Se.height()+1,We=tn("slotMinutes")/Ne,Le=Fe/We,n&&m()}function p(e){Te=e,Be.clear(),ke=0,H(Ce.width("").each(function(e,n){ke=Math.max(ke,t(n).outerWidth())}),ke);var n=be[0].clientWidth;ze=be.width()-n,ze?(H(xe,ze),xe.show().prev().removeClass("fc-last")):xe.hide().prev().addClass("fc-last"),He=Math.floor((n-ke)/Ae),H(ne.slice(0,-1),He)}function m(){function t(){be.scrollTop(r)}var e=v(),n=f(e);n.setHours(tn("firstHour"));var r=O(e,n)+1;t(),setTimeout(t,0)}function y(){qe=be.scrollTop()}function D(){be.scrollTop(qe)}function w(t){t.click(S).mousedown(cn)}function M(t){t.click(S).mousedown(J)}function S(t){if(!tn("selectable")){var e=Math.min(Ae-1,Math.floor((t.pageX-te.offset().left-ke)/He)),n=N(e),r=this.parentNode.className.match(/fc-slot(\d+)/);if(r){var a=parseInt(r[1])*tn("slotMinutes"),o=Math.floor(a/60);n.setHours(o),n.setMinutes(a%60+Ue),en("dayClick",ae[e],n,!1,t)}else en("dayClick",ae[e],n,!0,t)}}function C(t,e,n){n&&_e.build();var r,a,o=f(K.visStart);Ve?(r=g(e,o)*Je+Xe+1,a=g(t,o)*Je+Xe+1):(r=g(t,o),a=g(e,o)),r=Math.max(0,r),a=Math.min(Ae,a),a>r&&w(x(0,r,0,a-1))}function x(t,e,n,r){var a=_e.rect(t,e,n,r,le);return rn(a,le)}function E(t,e){for(var n=f(K.visStart),r=c(f(n),1),a=0;Ae>a;a++){var o=new Date(Math.max(n,t)),i=new Date(Math.min(r,e));if(i>o){var s=a*Je+Xe,l=_e.rect(0,s,0,s,De),u=O(n,o),d=O(n,i);l.top=u,l.height=d-u,M(rn(l,De))}c(n,1),c(r,1)}}function T(t){return Be.left(t)}function R(t){return Be.right(t)}function k(t){return{row:Math.floor(g(t,K.visStart)/7),col:L(t.getDay())}}function F(t){var e=N(t.col),n=t.row;return tn("allDaySlot")&&n--,n>=0&&u(e,Ue+n*Ne),e}function N(t){return c(f(K.visStart),t*Je+Xe)}function W(t){return tn("allDaySlot")&&!t.row}function L(t){return(t-Math.max(je,Pe)+Ae)%Ae*Je+Xe}function O(t,n){if(t=f(t,!0),u(f(t),Ue)>n)return 0;if(n>=u(f(t),Ze))return Me.height();var r=tn("slotMinutes"),a=60*n.getHours()+n.getMinutes()-Ue,o=Math.floor(a/r),i=dn[o];return i===e&&(i=dn[o]=Me.find("tr:eq("+o+") td div")[0].offsetTop),Math.max(0,Math.round(i-1+Fe*(a%r/r)))}function _(){return{left:ke,right:Te-ze}}function I(){return ye}function B(t){var e=f(t.start);return t.allDay?e:u(e,tn("defaultEventMinutes"))}function q(t,e){return e?f(t):u(f(t),tn("slotMinutes"))}function j(t,e,n){n?tn("allDaySlot")&&C(t,c(f(e),1),!0):P(t,e)}function P(e,n){var r=tn("selectHelper");if(_e.build(),r){var a=g(e,K.visStart)*Je+Xe;if(a>=0&&Ae>a){var o=_e.rect(0,a,0,a,De),i=O(e,e),s=O(e,n);if(s>i){if(o.top=i,o.height=s-i,o.left+=2,o.width-=5,t.isFunction(r)){var c=r(e,n);c&&(o.position="absolute",o.zIndex=8,Ee=t(c).css(o).appendTo(De))}else o.isStart=!0,o.isEnd=!0,Ee=t(ln({title:"",start:e,end:n,className:["fc-select-helper"],editable:!1},o)),Ee.css("opacity",tn("dragOpacity"));Ee&&(M(Ee),De.append(Ee),H(Ee,o.width,!0),z(Ee,o.height,!0))}}}else E(e,n)}function V(){an(),Ee&&(Ee.remove(),Ee=null)}function J(e){if(1==e.which&&tn("selectable")){sn(e);var n;Ie.start(function(t,e){if(V(),t&&t.col==e.col&&!W(t)){var r=F(e),a=F(t);n=[r,u(f(r),Ne),a,u(f(a),Ne)].sort(Y),P(n[0],n[3])}else n=null},e),t(document).one("mouseup",function(t){Ie.stop(),n&&(+n[0]==+n[1]&&X(n[0],!1,t),on(n[0],n[3],!1,t))})}}function X(t,e,n){en("dayClick",ae[L(t.getDay())],t,e,n)}function Q(t,e){Ie.start(function(t){if(an(),t)if(W(t))x(t.row,t.col,t.row,t.col);else{var e=F(t),n=u(f(e),tn("defaultEventMinutes"));E(e,n)}},e)}function G(t,e,n){var r=Ie.stop();an(),r&&en("drop",t,F(r),W(r),e,n,!1)}var K=this;K.renderAgenda=o,K.setWidth=p,K.setHeight=h,K.beforeHide=y,K.afterShow=D,K.defaultEventEnd=B,K.timePosition=O,K.dayOfWeekCol=L,K.dateCell=k,K.cellDate=F,K.cellIsAllDay=W,K.allDayRow=I,K.allDayBounds=_,K.getHoverListener=function(){return Ie},K.colContentLeft=T,K.colContentRight=R,K.getDaySegmentContainer=function(){return de},K.getSlotSegmentContainer=function(){return we},K.getMinMinute=function(){return Ue},K.getMaxMinute=function(){return Ze},K.getBodyContent=function(){return De},K.getRowCnt=function(){return 1},K.getColCnt=function(){return Ae},K.getColWidth=function(){return He},K.getSnapHeight=function(){return Le},K.getSnapMinutes=function(){return Ne},K.defaultSelectionEnd=q,K.renderDayOverlay=C,K.renderSelection=j,K.clearSelection=V,K.reportDayClick=X,K.dragStart=Q,K.dragStop=G,ue.call(K,n,r,a),ve.call(K),fe.call(K),ce.call(K);var te,ee,ne,re,ae,oe,ie,se,le,de,pe,ye,be,De,we,Me,Se,Ce,xe,Ee,Te,Re,ke,He,ze,Fe,Ne,We,Le,Ae,Oe,_e,Ie,Be,qe,Ye,je,Pe,Ve,Je,Xe,Ue,Ze,$e,Qe,Ge,Ke,tn=K.opt,en=K.trigger,nn=K.clearEvents,rn=K.renderOverlay,an=K.clearOverlays,on=K.reportSelection,sn=K.unselect,cn=K.daySelectionMousedown,ln=K.slotSegHtml,un=r.formatDate,dn={};U(n.addClass("fc-agenda")),_e=new he(function(e,n){function r(t){return Math.max(c,Math.min(l,t))}var a,o,i;ne.each(function(e,r){a=t(r),o=a.offset().left,e&&(i[1]=o),i=[o],n[e]=i}),i[1]=o+a.outerWidth(),tn("allDaySlot")&&(a=ye,o=a.offset().top,e[0]=[o,o+a.outerHeight()]);for(var s=De.offset().top,c=be.offset().top,l=c+be.outerHeight(),u=0;Oe*We>u;u++)e.push([r(s+Le*u),r(s+Le*(u+1))])}),Ie=new ge(_e),Be=new me(function(t){return oe.eq(t)})}function ce(){function n(t,e){C(t);var n,r=t.length,i=[],c=[];for(n=0;r>n;n++)t[n].allDay?i.push(t[n]):c.push(t[n]);
y("allDaySlot")&&(Y(a(i),e),H()),s(o(c),e),b("eventAfterAllRender")}function r(){x(),N().empty(),W().empty()}function a(e){var n,r,a,o,i=R(T(e,t.map(e,S),m.visStart,m.visEnd)),s=i.length,c=[];for(n=0;s>n;n++)for(r=i[n],a=0;r.length>a;a++)o=r[a],o.row=0,o.level=n,c.push(o);return c}function o(e){var n,r,a,o,s,l,d=P(),v=_(),h=O(),g=u(f(m.visStart),v),p=t.map(e,i),y=[];for(n=0;d>n;n++){for(r=R(T(e,p,g,u(f(g),h-v))),le(r),a=0;r.length>a;a++)for(o=r[a],s=0;o.length>s;s++)l=o[s],l.col=n,l.level=a,y.push(l);c(g,1,!0)}return y}function i(t){return t.end?f(t.end):u(f(t.start),y("defaultEventMinutes"))}function s(n,r){var a,o,i,s,c,u,d,f,h,g,p,m,D,w,M,S,C,x,E,T,R,H,z=n.length,N="",L={},O={},_=W(),Y=P();for((T=y("isRTL"))?(R=-1,H=Y-1):(R=1,H=0),a=0;z>a;a++)o=n[a],i=o.event,s=I(o.start,o.start),c=I(o.start,o.end),u=o.col,d=o.level,f=o.forward||0,h=B(u*R+H),g=q(u*R+H)-h,g=Math.min(g-6,.95*g),p=d?g/(d+f+1):f?2*(g/(f+1)-6):g,m=h+g/(d+f+1)*d*R+(T?g-p:0),o.top=s,o.left=m,o.outerWidth=p,o.outerHeight=c-s,N+=l(i,o);for(_[0].innerHTML=N,D=_.children(),a=0;z>a;a++)o=n[a],i=o.event,w=t(D[a]),M=b("eventRender",i,i,w),M===!1?w.remove():(M&&M!==!0&&(w.remove(),w=t(M).css({position:"absolute",top:o.top,left:o.left}).appendTo(_)),o.element=w,i._id===r?v(i,w,o):w[0]._fci=a,G(i,w));for(k(_,n,v),a=0;z>a;a++)o=n[a],(w=o.element)&&(C=L[S=o.key=X(w[0])],o.vsides=C===e?L[S]=A(w,!0):C,C=O[S],o.hsides=C===e?O[S]=F(w,!0):C,x=w.find(".fc-event-title"),x.length&&(o.contentTop=x[0].offsetTop));for(a=0;z>a;a++)o=n[a],(w=o.element)&&(w[0].style.width=Math.max(0,o.outerWidth-o.hsides)+"px",E=Math.max(0,o.outerHeight-o.vsides),w[0].style.height=E+"px",i=o.event,o.contentTop!==e&&10>E-o.contentTop&&(w.find("div.fc-event-time").text(ie(i.start,y("timeFormat"))+" - "+i.title),w.find("div.fc-event-title").remove()),b("eventAfterRender",i,i,w))}function l(t,e){var n="<",r=t.url,a=Q(t,y),o=["fc-event","fc-event-vert"];return D(t)&&o.push("fc-event-draggable"),e.isStart&&o.push("fc-event-start"),e.isEnd&&o.push("fc-event-end"),o=o.concat(t.className),t.source&&(o=o.concat(t.source.className||[])),n+=r?"a href='"+J(t.url)+"'":"div",n+=" class='"+o.join(" ")+"'"+" style='position:absolute;z-index:8;top:"+e.top+"px;left:"+e.left+"px;"+a+"'"+">"+"<div class='fc-event-inner'>"+"<div class='fc-event-time'>"+J(se(t.start,t.end,y("timeFormat")))+"</div>"+"<div class='fc-event-title'>"+J(t.title)+"</div>"+"</div>"+"<div class='fc-event-bg'></div>",e.isEnd&&w(t)&&(n+="<div class='ui-resizable-handle ui-resizable-s'>=</div>"),n+="</"+(r?"a":"div")+">"}function d(t,e,n){D(t)&&h(t,e,n.isStart),n.isEnd&&w(t)&&j(t,e,n),E(t,e)}function v(t,e,n){var r=e.find("div.fc-event-time");D(t)&&g(t,e,r),n.isEnd&&w(t)&&p(t,e,r),E(t,e)}function h(t,e,n){function r(){s||(e.width(a).height("").draggable("option","grid",null),s=!0)}var a,o,i,s=!0,l=y("isRTL")?-1:1,u=L(),d=V(),v=U(),h=Z(),g=_();e.draggable({zIndex:9,opacity:y("dragOpacity","month"),revertDuration:y("dragRevertDuration"),start:function(g,p){b("eventDragStart",e,t,g,p),te(t,e),a=e.width(),u.start(function(a,u,g,p){ae(),a?(o=!1,i=p*l,a.row?n?s&&(e.width(d-10),z(e,v*Math.round((t.end?(t.end-t.start)/ze:y("defaultEventMinutes"))/h)),e.draggable("option","grid",[d,1]),s=!1):o=!0:(re(c(f(t.start),i),c(S(t),i)),r()),o=o||s&&!i):(r(),o=!0),e.draggable("option","revert",o)},g,"drag")},stop:function(n,a){if(u.stop(),ae(),b("eventDragStop",e,t,n,a),o)r(),e.css("filter",""),K(t,e);else{var c=0;s||(c=Math.round((e.offset().top-$().offset().top)/v)*h+g-(60*t.start.getHours()+t.start.getMinutes())),ee(this,t,i,c,s,n,a)}}})}function g(t,e,n){function r(e){var r,a=u(f(t.start),e);t.end&&(r=u(f(t.end),e)),n.text(se(a,r,y("timeFormat")))}function a(){d&&(n.css("display",""),e.draggable("option","grid",[p,m]),d=!1)}var o,i,s,l,d=!1,v=y("isRTL")?-1:1,h=L(),g=P(),p=V(),m=U(),D=Z();e.draggable({zIndex:9,scroll:!1,grid:[p,m],axis:1==g?"y":!1,opacity:y("dragOpacity"),revertDuration:y("dragRevertDuration"),start:function(r,u){b("eventDragStart",e,t,r,u),te(t,e),o=e.position(),s=l=0,h.start(function(r,o,s,l){e.draggable("option","revert",!r),ae(),r&&(i=l*v,y("allDaySlot")&&!r.row?(d||(d=!0,n.hide(),e.draggable("option","grid",null)),re(c(f(t.start),i),c(S(t),i))):a())},r,"drag")},drag:function(t,e){s=Math.round((e.position.top-o.top)/m)*D,s!=l&&(d||r(s),l=s)},stop:function(n,c){var l=h.stop();ae(),b("eventDragStop",e,t,n,c),l&&(i||s||d)?ee(this,t,i,d?0:s,d,n,c):(a(),e.css("filter",""),e.css(o),r(0),K(t,e))}})}function p(t,e,n){var r,a,o=U(),i=Z();e.resizable({handles:{s:".ui-resizable-handle"},grid:o,start:function(n,o){r=a=0,te(t,e),e.css("z-index",9),b("eventResizeStart",this,t,n,o)},resize:function(s,c){r=Math.round((Math.max(o,e.height())-c.originalSize.height)/o),r!=a&&(n.text(se(t.start,r||t.end?u(M(t),i*r):null,y("timeFormat"))),a=r)},stop:function(n,a){b("eventResizeStop",this,t,n,a),r?ne(this,t,0,i*r,n,a):(e.css("z-index",8),K(t,e))}})}var m=this;m.renderEvents=n,m.compileDaySegs=a,m.clearEvents=r,m.slotSegHtml=l,m.bindDaySeg=d,de.call(m);var y=m.opt,b=m.trigger,D=m.isEventDraggable,w=m.isEventResizable,M=m.eventEnd,C=m.reportEvents,x=m.reportEventClear,E=m.eventElementHandlers,H=m.setHeight,N=m.getDaySegmentContainer,W=m.getSlotSegmentContainer,L=m.getHoverListener,O=m.getMaxMinute,_=m.getMinMinute,I=m.timePosition,B=m.colContentLeft,q=m.colContentRight,Y=m.renderDaySegs,j=m.resizableDayEvent,P=m.getColCnt,V=m.getColWidth,U=m.getSnapHeight,Z=m.getSnapMinutes,$=m.getBodyContent,G=m.reportEventElement,K=m.showEvents,te=m.hideEvents,ee=m.eventDrop,ne=m.eventResize,re=m.renderDayOverlay,ae=m.clearOverlays,oe=m.calendar,ie=oe.formatDate,se=oe.formatDates}function le(t){var e,n,r,a,o,i;for(e=t.length-1;e>0;e--)for(a=t[e],n=0;a.length>n;n++)for(o=a[n],r=0;t[e-1].length>r;r++)i=t[e-1][r],E(o,i)&&(i.forward=Math.max(i.forward||0,(o.forward||0)+1))}function ue(t,n,r){function a(t,e){var n=z[t];return"object"==typeof n?V(n,e||r):n}function o(t,e){return n.trigger.apply(n,[t,e||C].concat(Array.prototype.slice.call(arguments,2),[C]))}function i(t){return l(t)&&!a("disableDragging")}function s(t){return l(t)&&!a("disableResizing")}function l(t){return K(t.editable,(t.source||{}).editable,a("editable"))}function d(t){R={};var e,n,r=t.length;for(e=0;r>e;e++)n=t[e],R[n._id]?R[n._id].push(n):R[n._id]=[n]}function v(t){return t.end?f(t.end):x(t)}function h(t,e){k.push(e),H[t._id]?H[t._id].push(e):H[t._id]=[e]}function g(){k=[],H={}}function p(t,n){n.click(function(r){return n.hasClass("ui-draggable-dragging")||n.hasClass("ui-resizable-resizing")?e:o("eventClick",this,t,r)}).hover(function(e){o("eventMouseover",this,t,e)},function(e){o("eventMouseout",this,t,e)})}function m(t,e){b(t,e,"show")}function y(t,e){b(t,e,"hide")}function b(t,e,n){var r,a=H[t._id],o=a.length;for(r=0;o>r;r++)e&&a[r][0]==e[0]||a[r][n]()}function D(t,e,n,r,a,i,s){var c=e.allDay,l=e._id;M(R[l],n,r,a),o("eventDrop",t,e,n,r,a,function(){M(R[l],-n,-r,c),T(l)},i,s),T(l)}function w(t,e,n,r,a,i){var s=e._id;S(R[s],n,r),o("eventResize",t,e,n,r,function(){S(R[s],-n,-r),T(s)},a,i),T(s)}function M(t,n,r,a){r=r||0;for(var o,i=t.length,s=0;i>s;s++)o=t[s],a!==e&&(o.allDay=a),u(c(o.start,n,!0),r),o.end&&(o.end=u(c(o.end,n,!0),r)),E(o,z)}function S(t,e,n){n=n||0;for(var r,a=t.length,o=0;a>o;o++)r=t[o],r.end=u(c(v(r),e,!0),n),E(r,z)}var C=this;C.element=t,C.calendar=n,C.name=r,C.opt=a,C.trigger=o,C.isEventDraggable=i,C.isEventResizable=s,C.reportEvents=d,C.eventEnd=v,C.reportEventElement=h,C.reportEventClear=g,C.eventElementHandlers=p,C.showEvents=m,C.hideEvents=y,C.eventDrop=D,C.eventResize=w;var x=C.defaultEventEnd,E=n.normalizeEvent,T=n.reportEventChange,R={},k=[],H={},z=n.options}function de(){function n(t,e,n){var r,c,f,p,m,y,b,D,w=I(),M=T(),S=R(),C=0,x=t.length;for(w[0].innerHTML=a(t,n),o(t,w.children()),i(t),s(t,w,e),l(t),u(t),d(t),r=v(),c=0;M>c;c++){for(f=0,p=[],m=0;S>m;m++)p[m]=0;for(;x>C&&(y=t[C]).row==c;){for(b=j(p.slice(y.startCol,y.endCol)),y.top=b,b+=y.outerHeight,D=y.startCol;y.endCol>D;D++)p[D]=b;C++}r[c].height(j(p))}g(t,h(r))}function r(e,n,r){var i,s,c,f=t("<div/>"),p=I(),m=e.length;for(f[0].innerHTML=a(e),i=f.children(),p.append(i),o(e,i),l(e),u(e),d(e),g(e,h(v())),i=[],s=0;m>s;s++)c=e[s].element,c&&(e[s].row===n&&c.css("top",r),i.push(c[0]));return t(i)}function a(e){var n,r,a,o,i,s,c,l,u,d=y("isRTL"),f=e.length,v=z(),h=v.left,g=v.right,p=t(""),m="";for(n=0;f>n;n++)r=e[n],a=r.event,i=["fc-event","fc-event-hori"],D(a)&&i.push("fc-event-draggable"),r.isStart&&i.push("fc-event-start"),r.isEnd&&i.push("fc-event-end"),d?(s=L(r.end.getDay()-1),c=L(r.start.getDay()),l=r.isEnd?N(s):h,u=r.isStart?W(c):g):(s=L(r.start.getDay()),c=L(r.end.getDay()-1),l=r.isStart?N(s):h,u=r.isEnd?W(c):g),i=i.concat(a.className),a.source&&(i=i.concat(a.source.className||[])),o=a.url,p=Q(a,y),m+=o?"<a href='"+J(o)+"'":"<div",m+=" class='"+i.join(" ")+"'"+" style='position:absolute;z-index:8;left:"+l+"px;"+p+"'"+">"+"<div class='fc-event-inner'>",!a.allDay&&r.isStart&&(m+="<span class='fc-event-time'>"+J(q(a.start,a.end,y("timeFormat")))+"</span>"),m+="<span class='fc-event-title'>"+J(a.title)+"</span>"+"</div>",r.isEnd&&w(a)&&(m+="<div class='ui-resizable-handle ui-resizable-"+(d?"w":"e")+"'>"+"&nbsp;&nbsp;&nbsp;"+"</div>"),m+="</"+(o?"a":"div")+">",r.left=l,r.outerWidth=u-l,r.startCol=s,r.endCol=c+1;return m}function o(e,n){var r,a,o,i,s,c=e.length;for(r=0;c>r;r++)a=e[r],o=a.event,i=t(n[r]),s=b("eventRender",o,o,i),s===!1?i.remove():(s&&s!==!0&&(s=t(s).css({position:"absolute",left:a.left}),i.replaceWith(s),i=s),a.element=i)}function i(t){var e,n,r,a=t.length;for(e=0;a>e;e++)n=t[e],r=n.element,r&&S(n.event,r)}function s(t,e,n){var r,a,o,i,s=t.length;for(r=0;s>r;r++)a=t[r],o=a.element,o&&(i=a.event,i._id===n?B(i,o,a):o[0]._fci=r);k(e,t,B)}function l(t){var n,r,a,o,i,s=t.length,c={};for(n=0;s>n;n++)r=t[n],a=r.element,a&&(o=r.key=X(a[0]),i=c[o],i===e&&(i=c[o]=F(a,!0)),r.hsides=i)}function u(t){var e,n,r,a=t.length;for(e=0;a>e;e++)n=t[e],r=n.element,r&&(r[0].style.width=Math.max(0,n.outerWidth-n.hsides)+"px")}function d(t){var n,r,a,o,i,s=t.length,c={};for(n=0;s>n;n++)r=t[n],a=r.element,a&&(o=r.key,i=c[o],i===e&&(i=c[o]=_(a)),r.outerHeight=a[0].offsetHeight+i)}function v(){var t,e=T(),n=[];for(t=0;e>t;t++)n[t]=H(t).find("div.fc-day-content > div");return n}function h(t){var e,n=t.length,r=[];for(e=0;n>e;e++)r[e]=t[e][0].offsetTop;return r}function g(t,e){var n,r,a,o,i=t.length;for(n=0;i>n;n++)r=t[n],a=r.element,a&&(a[0].style.top=e[r.row]+(r.top||0)+"px",o=r.event,b("eventAfterRender",o,o,a))}function p(e,n,a){var o=y("isRTL"),i=o?"w":"e",s=n.find(".ui-resizable-"+i),l=!1;U(n),n.mousedown(function(t){t.preventDefault()}).click(function(t){l&&(t.preventDefault(),t.stopImmediatePropagation())}),s.mousedown(function(s){function u(n){b("eventResizeStop",this,e,n),t("body").css("cursor",""),h.stop(),P(),d&&E(this,e,d,0,n),setTimeout(function(){l=!1},0)}if(1==s.which){l=!0;var d,v,h=m.getHoverListener(),g=T(),p=R(),y=o?-1:1,D=o?p-1:0,w=n.css("top"),S=t.extend({},e),k=A(e.start);V(),t("body").css("cursor",i+"-resize").one("mouseup",u),b("eventResizeStart",this,e,s),h.start(function(t,n){if(t){var s=Math.max(k.row,t.row),l=t.col;1==g&&(s=0),s==k.row&&(l=o?Math.min(k.col,l):Math.max(k.col,l)),d=7*s+l*y+D-(7*n.row+n.col*y+D);var u=c(M(e),d,!0);if(d){S.end=u;var h=v;v=r(O([S]),a.row,w),v.find("*").css("cursor",i+"-resize"),h&&h.remove(),x(e)}else v&&(C(e),v.remove(),v=null);P(),Y(e.start,c(f(u),1))}},s)}})}var m=this;m.renderDaySegs=n,m.resizableDayEvent=p;var y=m.opt,b=m.trigger,D=m.isEventDraggable,w=m.isEventResizable,M=m.eventEnd,S=m.reportEventElement,C=m.showEvents,x=m.hideEvents,E=m.eventResize,T=m.getRowCnt,R=m.getColCnt;m.getColWidth;var H=m.allDayRow,z=m.allDayBounds,N=m.colContentLeft,W=m.colContentRight,L=m.dayOfWeekCol,A=m.dateCell,O=m.compileDaySegs,I=m.getDaySegmentContainer,B=m.bindDaySeg,q=m.calendar.formatDates,Y=m.renderDayOverlay,P=m.clearOverlays,V=m.clearSelection}function fe(){function e(t,e,a){n(),e||(e=c(t,a)),l(t,e,a),r(t,e,a)}function n(t){d&&(d=!1,u(),s("unselect",null,t))}function r(t,e,n,r){d=!0;var a=!1;if("resourceDay"==o.calendar.getView().name){var i=o.getHoverListener(),c=i.stop(),l=o.calendar,u=l.getResources();a=u[c.col]}s("select",null,t,e,n,r,a)}function a(e){var a=o.cellDate,s=o.cellIsAllDay,c=o.getHoverListener(),d=o.reportDayClick;if(1==e.which&&i("selectable")){n(e);var f;c.start(function(t,e){u(),t&&s(t)?(f=[a(e),a(t)].sort(Y),l(f[0],f[1],!0)):f=null},e),t(document).one("mouseup",function(t){c.stop(),f&&(+f[0]==+f[1]&&d(f[0],!0,t),r(f[0],f[1],!0,t))})}}var o=this;o.select=e,o.unselect=n,o.reportSelection=r,o.daySelectionMousedown=a;var i=o.opt,s=o.trigger,c=o.defaultSelectionEnd,l=o.renderSelection,u=o.clearSelection,d=!1;i("selectable")&&i("unselectAuto")&&t(document).mousedown(function(e){var r=i("unselectCancel");r&&t(e.target).parents(r).length||n(e)})}function ve(){function e(e,n){var r=o.shift();return r||(r=t("<div class='fc-cell-overlay' style='position:absolute;z-index:3'/>")),r[0].parentNode!=n[0]&&r.appendTo(n),a.push(r.css(e).show()),r}function n(){for(var t;t=a.shift();)o.push(t.hide().unbind())}var r=this;r.renderOverlay=e,r.clearOverlays=n;var a=[],o=[]}function he(t){var e,n,r=this;r.build=function(){e=[],n=[],t(e,n)},r.cell=function(t,r){var a,o=e.length,i=n.length,s=-1,c=-1;for(a=0;o>a;a++)if(r>=e[a][0]&&e[a][1]>r){s=a;break}for(a=0;i>a;a++)if(t>=n[a][0]&&n[a][1]>t){c=a;break}return s>=0&&c>=0?{row:s,col:c}:null},r.rect=function(t,r,a,o,i){var s=i.offset();return{top:e[t][0]-s.top,left:n[r][0]-s.left,width:n[o][1]-n[r][0],height:e[a][1]-e[t][0]}}}function ge(e){function n(t){pe(t);var n=e.cell(t.pageX,t.pageY);(!n!=!i||n&&(n.row!=i.row||n.col!=i.col))&&(n?(o||(o=n),a(n,o,n.row-o.row,n.col-o.col)):a(n,o),i=n)}var r,a,o,i,s=this;s.start=function(s,c,l){a=s,o=i=null,e.build(),n(c),r=l||"mousemove",t(document).bind(r,n)},s.stop=function(){return t(document).unbind(r,n),i}}function pe(t){t.pageX===e&&(t.pageX=t.originalEvent.pageX,t.pageY=t.originalEvent.pageY)}function me(t){function n(e){return a[e]=a[e]||t(e)}var r=this,a={},o={},i={};r.left=function(t){return o[t]=o[t]===e?n(t).position().left:o[t]},r.right=function(t){return i[t]=i[t]===e?r.left(t)+n(t).width():i[t]},r.clear=function(){a={},o={},i={}}}function ye(t,e){function n(t,e,n){e&&(c(t,e),a("weekends")||h(t,0>e?-1:1));var s=f(t,!0),l=c(f(s),1);r.title=i(t,a("titleFormat")),r.start=r.visStart=s,r.end=r.visEnd=l,o(n)}var r=this;r.render=n,we.call(r,t,e,"resourceDay");var a=r.opt,o=r.renderResourceView,i=e.formatDate}function be(){function n(t,e){x(t);var n,r=t.length,i=[],s=[];for(ie.getResources(),n=0;r>n;n++)t[n].allDay?i.push(t[n]):s.push(t[n]);b("allDaySlot")&&(j(a(i),e,!0),N()),l(o(s),e)}function r(){E(),W().empty(),L().empty()}function a(e){var n,r,a,o,i=R(T(e,t.map(e,S),y.visStart,y.visEnd)),s=i.length,c=[];for(n=0;s>n;n++)for(r=i[n],a=0;r.length>a;a++)o=r[a],o.row=0,o.level=n,c.push(o);return c}function o(e){var n,r,a,o,l,d,v,h,g=V(),p=I(),m=_(),b=u(f(y.visStart),p),D=(t.map(e,c),[]),w=ie.getResources();for(n=0;g>n;n++)for(v=i(w[n],e),h=s(w[n],e),r=R(T(v,h,b,u(f(b),m-p))),le(r),a=0;r.length>a;a++)for(o=r[a],l=0;o.length>l;l++)d=o[l],d.col=n,d.level=a,D.push(d);return D}function i(t,n){var r,a=[];for(r=0;n.length>r;r++)n[r].resource&&t!==e&&n[r].resource.id==t.id&&a.push(n[r]);return a}function s(n,r){var a,o,i=[];for(a=0;r.length>a;a++)r[a].resource&&n!==e&&r[a].resource.id==n.id&&i.push(r[a]);return o=t.map(i,c)}function c(t){return t.end?f(t.end):u(f(t.start),b("defaultEventMinutes"))}function l(n,r){var a,o,i,s,c,l,u,f,v,g,p,m,y,w,M,S,C,x,E,T,R,H,z=n.length,N="",W={},O={},_=L(),I=V();for((T=b("isRTL"))?(R=-1,H=I-1):(R=1,H=0),a=0;z>a;a++)o=n[a],i=o.event,s=B(o.start,o.start),c=B(o.start,o.end),l=o.col,u=o.level,f=o.forward||0,v=q(l*R+H),g=Y(l*R+H)-v,g=Math.min(g-6,.95*g),p=u?g/(u+f+1):f?2*(g/(f+1)-6):g,m=v+g/(u+f+1)*u*R+(T?g-p:0),o.top=s,o.left=m,o.outerWidth=p,o.outerHeight=c-s,N+=d(i,o);for(_[0].innerHTML=N,y=_.children(),a=0;z>a;a++)o=n[a],i=o.event,w=t(y[a]),M=D("eventRender",i,i,w),M===!1?w.remove():(M&&M!==!0&&(w.remove(),w=t(M).css({position:"absolute",top:o.top,left:o.left}).appendTo(_)),o.element=w,i._id===r?h(i,w,o):w[0]._fci=a,K(i,w));for(k(_,n,h),a=0;z>a;a++)o=n[a],(w=o.element)&&(C=W[S=o.key=X(w[0])],o.vsides=C===e?W[S]=A(w,!0):C,C=O[S],o.hsides=C===e?O[S]=F(w,!0):C,x=w.find(".fc-event-title"),x.length&&(o.contentTop=x[0].offsetTop));for(a=0;z>a;a++)o=n[a],(w=o.element)&&(w[0].style.width=Math.max(0,o.outerWidth-o.hsides)+"px",E=Math.max(0,o.outerHeight-o.vsides),w[0].style.height=E+"px",i=o.event,o.contentTop!==e&&10>E-o.contentTop&&(w.find("div.fc-event-time").text(se(i.start,b("timeFormat"))+" - "+i.title),w.find("div.fc-event-title").remove()),D("eventAfterRender",i,i,w))}function d(t,e){var n="<",r=t.url,a=Q(t,b),o=["fc-event","fc-event-vert"];return w(t)&&o.push("fc-event-draggable"),e.isStart&&o.push("fc-event-start"),e.isEnd&&o.push("fc-event-end"),o=o.concat(t.className),t.source&&(o=o.concat(t.source.className||[])),n+=r?"a href='"+J(t.url)+"'":"div",n+=" class='"+o.join(" ")+"'"+" style='position:absolute;z-index:8;top:"+e.top+"px;left:"+e.left+"px;"+a+"'"+">"+"<div class='fc-event-inner'>"+"<div class='fc-event-time'>"+J(ce(t.start,t.end,b("timeFormat")))+"</div>"+"<div class='fc-event-title'>"+J(t.title)+"</div>"+"</div>"+"<div class='fc-event-bg'></div>",e.isEnd&&M(t)&&(n+="<div class='ui-resizable-handle ui-resizable-s'>=</div>"),n+="</"+(r?"a":"div")+">"}function v(t,e,n){w(t)&&g(t,e,n.isStart),n.isEnd&&M(t)&&P(t,e,n),H(t,e)}function h(t,e,n){var r=e.find("div.fc-event-time");w(t)&&p(t,e,r),n.isEnd&&M(t)&&m(t,e,r),H(t,e)}function g(t,e,n){function r(){l||(e.width(a).height("").draggable("option","grid",null),l=!0)}var a,o,i,s,c,l=!0;b("isRTL")?-1:1;var u=O(),d=U(),f=Z(),v=$(),h=I();e.draggable({zIndex:9,opacity:b("dragOpacity","month"),revertDuration:b("dragRevertDuration"),start:function(h,g){D("eventDragStart",e,t,h,g),ee(t,e),a=e.width(),u.start(function(a,u,h,g){oe(),a?(o=!1,i=0,s=g,c=a.col,a.row?n?l&&(e.width(d-10),z(e,f*Math.round((t.end?(t.end-t.start)/ze:b("defaultEventMinutes"))/v)),e.draggable("option","grid",[d,1]),l=!1):o=!0:(ae(c),r()),o=o||l&&!s):(r(),o=!0),e.draggable("option","revert",o)},h,"drag")},stop:function(n,a){if(u.stop(),oe(),D("eventDragStop",e,t,n,a),o)r(),e.css("filter",""),te(t,e);else{var c=0;if(l||(c=Math.round((e.offset().top-G().offset().top)/f)*v+h-(60*t.start.getHours()+t.start.getMinutes())),t.resource){var d=t.resource._col+s,g=ie.getResources();t.resource=g[d],t.resource._col=d}ne(this,t,i,c,l,n,a)}}})}function p(t,e,n){function r(e){var r,a=u(f(t.start),e);t.end&&(r=u(f(t.end),e)),n.text(ce(a,r,b("timeFormat")))}function a(){v&&(n.css("display",""),e.draggable("option","grid",[p,m]),v=!1)}var o,i,s,c,l,d,v=!1;b("isRTL")?-1:1;var h=O(),g=V(),p=U(),m=Z(),y=$();e.draggable({zIndex:9,scroll:!1,grid:[p,m],axis:1==g?"y":!1,opacity:b("dragOpacity"),revertDuration:b("dragRevertDuration"),start:function(r,u){D("eventDragStart",e,t,r,u),ee(t,e),o=e.position(),l=d=0,h.start(function(t,r,o,l){e.draggable("option","revert",!t),oe(),t&&(i=0,s=l,c=t.col,b("allDaySlot")&&!t.row?(v||(v=!0,n.hide(),e.draggable("option","grid",null)),ae(c)):a())},r,"drag")},drag:function(t,e){l=Math.round((e.position.top-o.top)/m)*y,l!=d&&(v||r(l),d=l)},stop:function(n,u){var d,f=h.stop();oe(),D("eventDragStop",e,t,n,u),f&&(s||l||v)?(d=ie.getResources(),t.resource=d[c],t.resource._col=c,ne(this,t,i,v?0:l,v,n,u)):(a(),e.css("filter",""),e.css(o),r(0),te(t,e))}})}function m(t,e,n){var r,a,o=Z(),i=$();e.resizable({handles:{s:".ui-resizable-handle"},grid:o,start:function(n,o){r=a=0,ee(t,e),e.css("z-index",9),D("eventResizeStart",this,t,n,o)},resize:function(s,c){r=Math.round((Math.max(o,e.height())-c.originalSize.height)/o),r!=a&&(n.text(ce(t.start,r||t.end?u(C(t),i*r):null,b("timeFormat"))),a=r)},stop:function(n,a){D("eventResizeStop",this,t,n,a),r?re(this,t,0,i*r,n,a):(e.css("z-index",8),te(t,e))}})}var y=this;y.renderEvents=n,y.compileDaySegs=a,y.clearEvents=r,y.slotSegHtml=d,y.bindDaySeg=v,de.call(y);var b=y.opt,D=y.trigger,w=y.isEventDraggable,M=y.isEventResizable,C=y.eventEnd,x=y.reportEvents,E=y.reportEventClear,H=y.eventElementHandlers,N=y.setHeight,W=y.getDaySegmentContainer,L=y.getSlotSegmentContainer,O=y.getHoverListener,_=y.getMaxMinute,I=y.getMinMinute,B=y.timePosition,q=y.colContentLeft,Y=y.colContentRight,j=y.renderDaySegs,P=y.resizableDayEvent;y.getRowCnt;var V=y.getColCnt,U=y.getColWidth,Z=y.getSnapHeight,$=y.getSnapMinutes;y.getSlotHeight;var G=y.getBodyContent,K=y.reportEventElement,te=y.showEvents,ee=y.hideEvents,ne=y.eventDrop,re=y.eventResize;y.renderDayOverlay;var ae=y.renderResourceOverlay,oe=y.clearOverlays,ie=y.calendar,se=ie.formatDate,ce=ie.formatDates}function De(e,n,r){function a(){s=n.theme?"ui":"fc",l=r}function o(){c.remove()}var i=this;i.render=a,i.destroy=o;var s,c=t([]),l=[]}function we(n,r,a){function o(e){i(),en=r.getResources(),qe=en.length,0==qe&&qe++;var n,a=nn;n=[],t.each(en,function(t,e){n.push(e.id)}),nn=n.join(","),re&&pe&&(e||a!=nn)&&(re.remove(),pe.remove(),re=!1,pe=!1),re?on():s(),l()}function i(){Je=rn("theme")?"ui":"fc",Ue=rn("weekends")?0:1,Xe=rn("firstDay"),(Ze=rn("isRTL"))?($e=-1,Qe=qe-1):($e=1,Qe=0),Ge=b(rn("minTime")),Ke=b(rn("maxTime")),tn=rn("columnFormat"),_e=rn("snapMinutes")||rn("slotMinutes")}function s(){var e,r,a,o,i,s=Je+"-widget-header",c=Je+"-widget-content",l=0==rn("slotMinutes")%15;for(e="<table style='width:100%' class='fc-agenda-days fc-border-separate' cellspacing='0'><thead><tr><th class='fc-agenda-axis "+s+"'>&nbsp;</th>",r=0;qe>r;r++)e+="<th class='fc- fc-col"+r+" "+s+"'/>";for(e+="<th class='fc-agenda-gutter "+s+"'>&nbsp;</th>"+"</tr>"+"</thead>"+"<tbody>"+"<tr>"+"<th class='fc-agenda-axis "+s+"'>&nbsp;</th>",r=0;qe>r;r++)e+="<td class='fc- fc-col"+r+" "+c+"'>"+"<div>"+"<div class='fc-day-content'>"+"<div style='position:relative'>&nbsp;</div>"+"</div>"+"</div>"+"</td>";for(e+="<td class='fc-agenda-gutter "+c+"'>&nbsp;</td>"+"</tr>"+"</tbody>"+"</table>",re=t(e).appendTo(n),ae=re.find("thead"),oe=ae.find("th").slice(1,-1),ie=re.find("tbody"),se=ie.find("td").slice(0,-1),ce=se.find("div.fc-day-content div"),le=se.eq(0),de=le.find("> div"),Z(ae.add(ae.find("tr"))),Z(ie.add(ie.find("tr"))),Re=ae.find("th:first"),ke=re.find(".fc-agenda-gutter"),pe=t("<div style='position:absolute;z-index:2;left:0;width:100%'/>").appendTo(n),rn("allDaySlot")?(ye=t("<div style='position:absolute;z-index:8;top:0;left:0'/>").appendTo(pe),e="<table style='width:100%' class='fc-agenda-allday' cellspacing='0'><tr><th class='"+s+" fc-agenda-axis'>"+rn("allDayText")+"</th>"+"<td>"+"<div class='fc-day-content'><div style='position:relative'/></div>"+"</td>"+"<th class='"+s+" fc-agenda-gutter'>&nbsp;</th>"+"</tr>"+"</table>",we=t(e).appendTo(pe),Me=we.find("tr"),M(Me.find("td")),Re=Re.add(we.find("th:first")),ke=ke.add(we.find("th.fc-agenda-gutter")),pe.append("<div class='fc-agenda-divider "+s+"'>"+"<div class='fc-agenda-divider-inner'/>"+"</div>")):ye=t([]),Se=t("<div style='position:absolute;width:100%;overflow-x:hidden;overflow-y:auto'/>").appendTo(pe),Ce=t("<div style='position:relative;width:100%;overflow:hidden'/>").appendTo(Se),xe=t("<div style='position:absolute;z-index:8;top:0;left:0'/>").appendTo(Ce),De=t("<div style='position:absolute;z-index:-1;top:0;left:0'/>").appendTo(Ce),e="<table class='fc-agenda-slots' style='width:100%' cellspacing='0'><tbody>",a=v(),o=u(f(a),Ke),u(a,Ge),Ye=0,r=0;o>a;r++)i=a.getMinutes(),e+="<tr class='fc-slot"+r+" "+(i?"fc-minor":"")+"'>"+"<th class='fc-agenda-axis "+s+"'>"+(l&&i?"&nbsp;":vn(a,rn("axisFormat")))+"</th>"+"<td class='"+c+"'>"+"<div style='position:relative'>&nbsp;</div>"+"</td>"+"</tr>",u(a,rn("slotMinutes")),Ye++;e+="</tbody></table>",Ee=t(e).appendTo(Ce),Te=Ee.find("div:first"),S(Ee.find("td")),Re=Re.add(Ee.find("th:first"))}function l(){var t,e,n,r,a=d(new Date);for(t=0;qe>t;t++)r=O(0),e=oe.eq(t),en.length>0?e.html(en[t].name):e.html("None"),n=se.eq(t),+r==+a?n.addClass(Je+"-state-highlight fc-today"):n.removeClass(Je+"-state-highlight fc-today"),$(e.add(n),r)}function h(t,n){t===e&&(t=Fe),Fe=t,hn={};var r=ie.position().top,a=Se.position().top,o=Math.min(t-r,Ee.height()+a+1);de.height(o-A(le)),pe.css("top",r),Se.height(o-a-1),Ae=Te.height()+1,Ie=rn("slotMinutes")/_e,Be=Ae/Ie,n&&y()}function m(e){ze=e,Ve.clear(),Ne=0,H(Re.width("").each(function(e,n){Ne=Math.max(Ne,t(n).outerWidth())}),Ne);var n=Se[0].clientWidth;Le=Se.width()-n,Le?(H(ke,Le),ke.show().prev().removeClass("fc-last")):ke.hide().prev().addClass("fc-last"),We=Math.floor((n-Ne)/qe),H(oe.slice(0,-1),We)}function y(){function t(){Se.scrollTop(r)}var e=v(),n=f(e);n.setHours(rn("firstHour"));var r=B(e,n)+1;t(),setTimeout(t,0)}function D(){Oe=Se.scrollTop()}function w(){Se.scrollTop(Oe)}function M(t){t.click(C).mousedown(dn)}function S(t){t.click(C).mousedown(G)}function C(t){if(!rn("selectable")){var e=Math.min(qe-1,Math.floor((t.pageX-re.offset().left-Ne)/We)),n=O(e),r=this.parentNode.className.match(/fc-slot(\d+)/);if(r){var a=parseInt(r[1])*rn("slotMinutes"),o=Math.floor(a/60);n.setHours(o),n.setMinutes(a%60+Ge),an("dayClick",se[e],n,!1,t)}else an("dayClick",se[e],n,!0,t)}}function x(t,e,n){n&&je.build();var r,a,o=f(ne.visStart);Ze?(r=g(e,o)*$e+Qe+1,a=g(t,o)*$e+Qe+1):(r=g(t,o),a=g(e,o)),r=Math.max(0,r),a=Math.min(qe,a),a>r&&M(T(0,r,0,a-1))}function E(t,e){e&&je.build();var n=Math.max(0,t),r=Math.min(qe,t);M(T(0,n,0,r))}function T(t,e,n,r){var a=je.rect(t,e,n,r,pe);return sn(a,pe)}function R(t,e){for(var n=f(ne.visStart),r=c(f(n),1),a=0;qe>a;a++){var o=new Date(Math.max(n,t)),i=new Date(Math.min(r,e));if(i>o){var s=a*$e+Qe,l=je.rect(0,s,0,s,Ce),u=B(n,o),d=B(n,i);l.top=u,l.height=d-u,S(sn(l,Ce))}c(n,1),c(r,1)}}function k(t){for(var e="",n=0;t.length>n;n++){var r=t[n];if(r.start>=this.start&&r.end<=this.end){var a=B(r.start,r.start),o=B(r.end,r.end),i=o-a,s=g(r.start,ne.visStart);if(r.resourceId)var c=r.resourceId-1,l=r.resourceId-1,u=F(c)-2,d=N(l)+3,f=d-u;else var u=F(s)-2,d=N(s)+3,f=d-u;var v="";r.cls&&(v=" "+r.cls);var h="";r.color&&(h="color:"+r.color+";"),r.background&&(h+="background:"+r.background+";");var p=r.title||"";e+='<div style="position: absolute; top: '+a+"px; "+"left: "+u+"px; "+"width: "+f+"px; "+"height: "+i+"px;"+h+'" '+'class="fc-annotation fc-annotation-skin'+v+'">'+p+"</div>"}}De[0].innerHTML=e}function F(t){return Ve.left(t)}function N(t){return Ve.right(t)}function W(t){return{row:Math.floor(g(t,ne.visStart)/7),col:I(t.getDay())}}function L(t){var e=O(t.col),n=t.row;return rn("allDaySlot")&&n--,n>=0&&u(e,Ge+n*_e),e}function O(t){return c(f(ne.visStart),t*$e+Qe)}function _(t){return rn("allDaySlot")&&!t.row}function I(t){return(t-Math.max(Xe,Ue)+qe)%qe*$e+Qe}function B(t,n){if(t=f(t,!0),u(f(t),Ge)>n)return 0;if(n>=u(f(t),Ke))return Ee.height();var r=rn("slotMinutes"),a=60*n.getHours()+n.getMinutes()-Ge,o=Math.floor(a/r),i=hn[o];return i===e&&(i=hn[o]=Ee.find("tr:eq("+o+") td div")[0].offsetTop),Math.max(0,Math.round(i-1+Ae*(a%r/r)))}function q(){return{left:Ne,right:ze-Le}}function j(){return Me}function P(t){var e=f(t.start);return t.allDay?e:u(e,rn("defaultEventMinutes"))}function V(t,e){return e?f(t):u(f(t),rn("slotMinutes"))}function J(t,e,n){n?rn("allDaySlot")&&x(t,c(f(e),1),!0):X(t,e)}function X(e,n){var r=rn("selectHelper");if(je.build(),r){var a=g(e,ne.visStart)*$e+Qe;if(a>=0&&qe>a){var o=je.rect(0,a,0,a,Ce),i=B(e,e),s=B(e,n);if(s>i){if(o.top=i,o.height=s-i,o.left+=2,o.width-=5,t.isFunction(r)){var c=r(e,n);c&&(o.position="absolute",o.zIndex=8,He=t(c).css(o).appendTo(Ce))}else o.isStart=!0,o.isEnd=!0,He=t(fn({title:"",start:e,end:n,className:["fc-select-helper"],editable:!1},o)),He.css("opacity",rn("dragOpacity"));He&&(S(He),Ce.append(He),H(He,o.width,!0),z(He,o.height,!0))}}}else R(e,n)}function Q(){cn(),He&&(He.remove(),He=null)}function G(e){if(1==e.which&&rn("selectable")){un(e);var n,r;Pe.start(function(t,e){if(Q(),t&&t.col==e.col&&!_(t)){var a=L(e);a.setDate(a.getDate()-t.col);var o=L(t);o.setDate(o.getDate()-t.col);var i=new Date(a),s=new Date(o);n=[i,u(f(i),_e),s,u(f(s),_e)].sort(Y);var c=L(e),l=L(t);r=[c,u(f(c),_e),l,u(f(l),_e)].sort(Y),X(r[0],r[3])}else n=null},e),t(document).one("mouseup",function(t){Pe.stop(),n&&(+n[0]==+n[1]&&K(n[0],!1,t),ln(n[0],n[3],!1,t))})}}function K(t,e,n){an("dayClick",se[I(t.getDay())],t,e,n)}function te(t,e){Pe.start(function(t){if(cn(),t)if(_(t))T(t.row,t.col,t.row,t.col);else{var e=L(t),n=u(f(e),rn("defaultEventMinutes"));R(e,n)}},e)}function ee(t,e,n){var r=Pe.stop();if(cn(),r){var a=en[r.col],o=L(r),i=ne.visStart;p(o,i.getFullYear(),i.getMonth(),i.getDate()),an("drop",t,o,_(r),e,n,a)}}var ne=this;ne.renderResourceView=o,ne.setWidth=m,ne.setHeight=h,ne.beforeHide=D,ne.afterShow=w,ne.defaultEventEnd=P,ne.timePosition=B,ne.dayOfWeekCol=I,ne.dateCell=W,ne.cellDate=L,ne.cellIsAllDay=_,ne.allDayRow=j,ne.allDayBounds=q,ne.getHoverListener=function(){return Pe},ne.colContentLeft=F,ne.colContentRight=N,ne.getDaySegmentContainer=function(){return ye},ne.getSlotSegmentContainer=function(){return xe},ne.getAnnotationSegmentContainer=function(){return De},ne.getMinMinute=function(){return Ge},ne.getMaxMinute=function(){return Ke},ne.getBodyContent=function(){return Ce},ne.getRowCnt=function(){return 1},ne.getColCnt=function(){return qe},ne.getColWidth=function(){return We},ne.getSnapHeight=function(){return Be},ne.getSnapMinutes=function(){return _e},ne.getSlotHeight=function(){return Ae},ne.defaultSelectionEnd=V,ne.renderDayOverlay=x,ne.renderResourceOverlay=E,ne.renderSelection=J,ne.clearSelection=Q,ne.reportDayClick=K,ne.dragStart=te,ne.dragStop=ee,ne.renderAnnotations=k,ue.call(ne,n,r,a),ve.call(ne),fe.call(ne),be.call(ne);var re,ae,oe,ie,se,ce,le,de,pe,ye,De,we,Me,Se,Ce,xe,Ee,Te,Re,ke,He,ze,Fe,Ne,We,Le,Ae,Oe,_e,Ie,Be,qe,Ye,je,Pe,Ve,Je,Xe,Ue,Ze,$e,Qe,Ge,Ke,tn,en,nn,rn=ne.opt,an=ne.trigger,on=ne.clearEvents,sn=ne.renderOverlay,cn=ne.clearOverlays,ln=ne.reportSelection,un=ne.unselect,dn=ne.daySelectionMousedown,fn=ne.slotSegHtml,vn=r.formatDate,hn={};U(n.addClass("fc-agenda")),je=new he(function(e,n){function r(t){return Math.max(c,Math.min(l,t))}var a,o,i;oe.each(function(e,r){a=t(r),o=a.offset().left,e&&(i[1]=o),i=[o],n[e]=i}),i[1]=o+a.outerWidth(),rn("allDaySlot")&&(a=Me,o=a.offset().top,e[0]=[o,o+a.outerHeight()]);for(var s=Ce.offset().top,c=Se.offset().top,l=c+Se.outerHeight(),u=0;Ye>u;u++)e.push([r(s+Be*u),r(s+Be*(u+1))])}),Pe=new ge(je),Ve=new me(function(t){return ce.eq(t)})}var Me={defaultView:"month",aspectRatio:1.35,header:{left:"title",center:"",right:"today prev,next"},weekends:!0,weekNumbers:!1,weekNumberCalculation:"iso",weekNumberTitle:"W",allDayDefault:!0,ignoreTimezone:!0,lazyFetching:!0,startParam:"start",endParam:"end",titleFormat:{month:"MMMM yyyy",week:"MMM d[ yyyy]{ '&#8212;'[ MMM] d yyyy}",day:"dddd, MMM d, yyyy"},columnFormat:{month:"ddd",week:"ddd M/d",day:"dddd M/d"},timeFormat:{"":"h(:mm)t"},isRTL:!1,firstDay:0,monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],monthNamesShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],buttonText:{prev:"<span class='fc-text-arrow'>&lsaquo;</span>",next:"<span class='fc-text-arrow'>&rsaquo;</span>",prevYear:"<span class='fc-text-arrow'>&laquo;</span>",nextYear:"<span class='fc-text-arrow'>&raquo;</span>",today:"today",month:"month",week:"week",day:"day",resourceDay:"resource"},theme:!1,buttonIcons:{prev:"circle-triangle-w",next:"circle-triangle-e"},unselectAuto:!0,dropAccept:"*"},Se={header:{left:"next,prev today",center:"",right:"title"},buttonText:{prev:"<span class='fc-text-arrow'>&rsaquo;</span>",next:"<span class='fc-text-arrow'>&lsaquo;</span>",prevYear:"<span class='fc-text-arrow'>&raquo;</span>",nextYear:"<span class='fc-text-arrow'>&laquo;</span>"},buttonIcons:{prev:"circle-triangle-e",next:"circle-triangle-w"}},Ce=t.fullCalendar={version:"1.6.1"},xe=Ce.views={};
t.fn.fullCalendar=function(n){if("string"==typeof n){var a,o=Array.prototype.slice.call(arguments,1);return this.each(function(){var r=t.data(this,"fullCalendar");if(r&&t.isFunction(r[n])){var i=r[n].apply(r,o);a===e&&(a=i),"destroy"==n&&t.removeData(this,"fullCalendar")}}),a!==e?a:this}var i=n.eventSources||[];delete n.eventSources,n.events&&(i.push(n.events),delete n.events);var s=n.eventResources||[];return delete n.eventResources,n.resources&&(s=n.resources,delete n.resources),n=t.extend(!0,{},Me,n.isRTL||n.isRTL===e&&Me.isRTL?Se:{},n),this.each(function(e,a){var o=t(a),c=new r(o,n,i,s);o.data("fullCalendar",c),c.render()}),this},Ce.sourceNormalizers=[],Ce.sourceFetchers=[];var Ee={dataType:"json",cache:!1},Te=1;Ce.addDays=c,Ce.cloneDate=f,Ce.parseDate=m,Ce.parseISO8601=y,Ce.parseTime=b,Ce.formatDate=D,Ce.formatDates=w;var Re=["sun","mon","tue","wed","thu","fri","sat"],ke=864e5,He=36e5,ze=6e4,Fe={s:function(t){return t.getSeconds()},ss:function(t){return P(t.getSeconds())},m:function(t){return t.getMinutes()},mm:function(t){return P(t.getMinutes())},h:function(t){return t.getHours()%12||12},hh:function(t){return P(t.getHours()%12||12)},H:function(t){return t.getHours()},HH:function(t){return P(t.getHours())},d:function(t){return t.getDate()},dd:function(t){return P(t.getDate())},ddd:function(t,e){return e.dayNamesShort[t.getDay()]},dddd:function(t,e){return e.dayNames[t.getDay()]},M:function(t){return t.getMonth()+1},MM:function(t){return P(t.getMonth()+1)},MMM:function(t,e){return e.monthNamesShort[t.getMonth()]},MMMM:function(t,e){return e.monthNames[t.getMonth()]},yy:function(t){return(t.getFullYear()+"").substring(2)},yyyy:function(t){return t.getFullYear()},t:function(t){return 12>t.getHours()?"a":"p"},tt:function(t){return 12>t.getHours()?"am":"pm"},T:function(t){return 12>t.getHours()?"A":"P"},TT:function(t){return 12>t.getHours()?"AM":"PM"},u:function(t){return D(t,"yyyy-MM-dd'T'HH:mm:ss'Z'")},S:function(t){var e=t.getDate();return e>10&&20>e?"th":["st","nd","rd"][e%10-1]||"th"},w:function(t,e){return e.weekNumberCalculation(t)},W:function(t){return M(t)}};Ce.dateFormatters=Fe,Ce.applyAll=G,xe.month=te,xe.basicWeek=ee,xe.basicDay=ne,n({weekMode:"fixed"}),xe.agendaWeek=oe,xe.agendaDay=ie,n({allDaySlot:!0,allDayText:"all-day",firstHour:6,slotMinutes:30,defaultEventMinutes:120,axisFormat:"h(:mm)tt",timeFormat:{agenda:"h:mm{ - h:mm}"},dragOpacity:{agenda:.5},minTime:0,maxTime:24}),xe.resourceDay=ye,n({allDaySlot:!0,allDayText:"all-day",firstHour:6,slotMinutes:30,defaultEventMinutes:120,axisFormat:"h(:mm)tt",timeFormat:{agenda:"h:mm{ - h:mm}"},dragOpacity:{resource:.5},minTime:0,maxTime:24})})(jQuery);